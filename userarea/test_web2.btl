<?btl
{ tag : "html" , content : [ ] , attrs : [ { lang : "fr" } ] } var html
{ tag : "head" , content : [ ] , attrs : [ ] } var head
{ tag : "body" , content : [ "Contenu de la page" ] , attrs : [ ] } var body
"content" head @ html cell+
"content" body @ html cell+
{ tag : "title" , content : [ "Ceci est une page test" ] , attrs : [ ] } var title
"content" title @ head cell+
cls

"generate" ?def invert if
	defer generate
	( usage : html @ -- )
	:noname
		dup "tag" cell@ local tag
		dup "content" cell@ local content
		"attrs" cell@ local attrs
		0 local item
		0 local i
		0 local j
		0 local k
		0 local v
		tag @ "html" = if "<!DOCTYPE html>" .cr then
		"<<!0!>" [ tag @ ] format .

		attrs @ cells 0 > 
		if
			attrs @ 0 cell@ attrs !
			attrs @ keys k !
			attrs @ values v !
			k @ cells j
			do
				" <!0!>='<!1!>'" [ k @ j @ cell@ v @ j @ cell@ ] format .
			loop
		then
		">" .cr
		content @ cells i
		do
			content @ i @ cell@ item !
			item @ ?str
			if
				item @ .cr
			else
				item @ generate
			then
		loop
		"</<!0!>>" [ tag @ ] format .cr
	;
	is generate
then
html @ generate

forget html
forget head
forget title
forget body
?>