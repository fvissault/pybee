<?btl
(
: generate
    dup "tag" cell@ local tag 
    dup "content" cell@ local content 
    dup "attrs" cell@ local attrs 
    "container" cell@ local container 
    0 local item 
    0 local i 
    0 local k 
    0 local v 
    tag @ "comment" = 
    if 
      "<!--<#0#>-->" [ content @ 0 cell@ ] format .cr 
    else 
      tag @ "html" = 
      if 
        "<!DOCTYPE html>" .cr 
      then 
      "<<#0#>" [ tag @ ] format . 
      attrs @ cells 0 > 
      if 
        attrs @ keys k ! attrs @ values v ! k @ cells i 
        do 
          k @ i @ cell@ v @ i @ cell@ =
          if
            " <#0#>" [ k @ i @ cell@ ] format .
          else 
            " <#0#>='<#1#>'" [ k @ i @ cell@ v @ i @ cell@ ] format .
          then 
        loop 
      then 
      container @ "y" = 
      if 
        ">" .cr 0 i ! content @ cells i 
        do 
          content @ i @ cell@ item ! item @ ?str 
          if 
            item @ .cr 
          else 
            item @ generate 
          then 
        loop 
      else 
        "/>" .cr 
      then 
      container @ "y" = 
      if 
        "</<#0#>>" [ tag @ ] format .cr 
      then 
    then
;
)

webreset
body form addcontent
title "Ceci est une page test" addcontent
form "action" "http://localhost/pybee/browser.py?file=myaction&path=default" addattr
html "lang" "en" addattr
head "css/file.css" headlink addcontent
head "js/file.js" headscriptfile addcontent
head "textarea { background-color: DarkSalmon; color: white; }" style addcontent

"division" div var div1
div1 "Ceci est mon label : " "mydiv" label addcontent
div1 "mydiv" "test" "text" fieldarea addcontent
form div1 addcontent

"img/bb.jpeg" img var myimg
form myimg addcontent
myimg "width" "300" addattr

form br addcontent
form "ta" textarea addcontent

[ [ "Volvo" "volvo" "n" ] 
  [ "Saab" "saab" "y" ] 
  [ "Mercedes" "mercedes" "n" ] 
  [ "Audi" "audi" "n" ] ] "cars" completeselect var cars drop
form br addcontent
form cars addcontent

form br addcontent
form "button" "alert("Hello world!")" "Valider" button addcontent

body "yahoo" "http://www.yahoo.fr" a addcontent

body 1 "Test de titre 1" maintitle addcontent
body "Ceci est mon premier paragraph avec Beetle" paragraph addcontent
body 2 "Test de titre 2" maintitle addcontent
body 3 "Test de titre 3" maintitle addcontent
body 4 "Test de titre 4" maintitle addcontent
body 5 "Test de titre 5" maintitle addcontent

body "World Health Organization" "WHO" abbr addcontent
body br addcontent

"img/planets.gif" img var planets
body planets addcontent
planets "width" "145" addattr
planets "height" "126" addattr
planets "usemap" "#planetmap" addattr

"planetmap" map var planetmap
planetmap "rect" "0,0,82,126" "sun.htm" area addcontent
planetmap "circle" "90,58,3" "mercur.htm" area addcontent
planetmap "circle" "124,58,8" "venus.htm" area addcontent
body planetmap addcontent

body br addcontent
"controls" "noautoplay" "noloop" "nomuted" audio var horse
horse "src" "img/horse.ogg" addattr
body horse addcontent

body br addcontent

( html @ .cr cr )

html @ generate cls

forget div1
forget myimg
forget cars
?>