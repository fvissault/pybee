<?btl
{ tag : "html" , content : [ ] , attrs : { lang : "fr" } , container : "y" } var html
{ tag : "head" , content : [ ] , attrs : { } , container : "y" } var head
{ tag : "body" , content : [ "Contenu de la page" ] , attrs : { } , container : "y" } var body
"content" head @ html cell+
"content" body @ html cell+
{ tag : "title" , content : [ "Ceci est une page test" ] , attrs : { } , container : "y" } var title
"content" title @ head cell+
cls

html @ .cr cr

"generate" ?def invert if
	defer generate
	( usage : html @ -- )
	:noname
		dup "tag" cell@ local tag
		dup "content" cell@ local content
		dup "attrs" cell@ local attrs
		"container" cell@ local container
		0 local item
		0 local i
		0 local k
		0 local v
		tag @ "html" = if "<!DOCTYPE html>" .cr then
		"<<!0!>" [ tag @ ] format .

		attrs @ cells 0 > 
		if
			( attrs @ 0 cell@ attrs ! )
			attrs @ keys k !
			attrs @ values v !
			k @ cells i
			do
				" <!0!>='<!1!>'" [ k @ i @ cell@ v @ i @ cell@ ] format .
			loop
		then
		container @ "y" =
		if
			">" .cr
			0 i !
			content @ cells i
			do
				content @ i @ cell@ item !
				item @ ?str
				if
					item @ .cr
				else
					item @ generate
				then
			loop
		else
			"/>" .cr
		then
		container @ "y" =
		if
			"</<!0!>>" [ tag @ ] format .cr
		then
	;
	is generate
then
html @ generate

forget html
forget head
forget title
forget body
?>